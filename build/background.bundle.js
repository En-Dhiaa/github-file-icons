(()=>{"use strict";var e={406:(e,t,n)=>{n.r(t);var o=n(848);const r="object"==typeof chrome&&"scripting"in chrome;function i(e){return void 0===e?void 0:[e]}function s({tabId:e,frameId:t,files:n,allFrames:s,matchAboutBlank:a,runAt:c}){for(let l of n)"string"==typeof l&&(l={file:l}),r?chrome.scripting.insertCSS({target:{tabId:e,frameIds:i(t),allFrames:s},files:"file"in l?[l.file]:void 0,css:"code"in l?l.code:void 0}):o.Z.tabs.insertCSS(e,{...l,matchAboutBlank:a,allFrames:s,frameId:t,runAt:null!=c?c:"document_start"})}async function a({tabId:e,frameId:t,files:n,allFrames:s,matchAboutBlank:a,runAt:c}){let l;for(let u of n)if("string"==typeof u&&(u={file:u}),r){if("code"in u)throw new Error("chrome.scripting does not support injecting strings of `code`");chrome.scripting.executeScript({target:{tabId:e,frameIds:i(t),allFrames:s},files:[u.file]})}else"code"in u&&await l,l=o.Z.tabs.executeScript(e,{...u,matchAboutBlank:a,allFrames:s,frameId:t,runAt:c})}var c=n(411);const l="object"==typeof chrome&&"webNavigation"in chrome;async function u(e,t){return async function(e,t,...n){const{frameId:i,tabId:s}=function(e){return"object"==typeof e?e:{tabId:e,frameId:0}}(e);if(r){const[e]=await chrome.scripting.executeScript({target:{tabId:s,frameIds:[i]},func:t,args:n});return null==e?void 0:e.result}const[a]=await o.Z.tabs.executeScript(s,{code:`(${t.toString()})(...${JSON.stringify(n)})`,frameId:i});return a}(e,(e=>{const t=document[e];return document[e]=!0,t}),JSON.stringify(t))}var d=n(842);const m="object"==typeof chrome&&"scripting"in chrome;function f(e){return void 0===e?void 0:[e]}function p({tabId:e,frameId:t,files:n,allFrames:r,matchAboutBlank:i,runAt:s}){for(let a of n)"string"==typeof a&&(a={file:a}),m?chrome.scripting.insertCSS({target:{tabId:e,frameIds:f(t),allFrames:r},files:"file"in a?[a.file]:void 0,css:"code"in a?a.code:void 0}):o.Z.tabs.insertCSS(e,{...a,matchAboutBlank:i,allFrames:r,frameId:t,runAt:null!=s?s:"document_start"})}async function g({tabId:e,frameId:t,files:n,allFrames:r,matchAboutBlank:i,runAt:s}){let a;for(let c of n)if("string"==typeof c&&(c={file:c}),m){if("code"in c)throw new Error("chrome.scripting does not support injecting strings of `code`");chrome.scripting.executeScript({target:{tabId:e,frameIds:f(t),allFrames:r},files:[c.file]})}else"code"in c&&await a,a=o.Z.tabs.executeScript(e,{...c,matchAboutBlank:i,allFrames:r,frameId:t,runAt:s})}async function h(e,t){var n,o,r,i,s,a;const{frameId:c,tabId:l}="object"==typeof e?e:{tabId:e,frameId:0};for(const e of(u=t,Array.isArray(u)?u:[u]))p({tabId:l,frameId:c,files:null!==(n=e.css)&&void 0!==n?n:[],matchAboutBlank:null!==(o=e.matchAboutBlank)&&void 0!==o?o:e.match_about_blank,runAt:null!==(r=e.runAt)&&void 0!==r?r:e.run_at}),g({tabId:l,frameId:c,files:null!==(i=e.js)&&void 0!==i?i:[],matchAboutBlank:null!==(s=e.matchAboutBlank)&&void 0!==s?s:e.match_about_blank,runAt:null!==(a=e.runAt)&&void 0!==a?a:e.run_at});var u;await Promise.all([])}var b,v,w;const y=new Map,I=null!==(w=null===(v=null===(b=null===globalThis||void 0===globalThis?void 0:globalThis.browser)||void 0===b?void 0:b.contentScripts)||void 0===v?void 0:v.register)&&void 0!==w?w:async function(e,t){const{js:n=[],css:r=[],matchAboutBlank:i,matches:d,excludeMatches:m,runAt:f}=e;let{allFrames:p}=e;l?p=!1:p&&console.warn("`allFrames: true` requires the `webNavigation` permission to work correctly: https://github.com/fregante/content-scripts-register-polyfill#permissions");const g=(0,c.sr)(...d),h=(0,c.sr)(...null!=m?m:[]),b=async(e,t,c=0)=>{g.test(e)&&!h.test(e)&&await async function(e){return o.Z.permissions.contains({origins:[new URL(e).origin+"/*"]})}(e)&&!await u({tabId:t,frameId:c},{js:n,css:r})&&(s({tabId:t,frameId:c,files:r,matchAboutBlank:i,runAt:f}),await a({tabId:t,frameId:c,files:n,matchAboutBlank:i,runAt:f}))},v=async(e,{status:t},{url:n})=>{t&&n&&b(n,e)},w=async({tabId:e,frameId:t,url:n})=>{b(n,e,t)};l?chrome.webNavigation.onCommitted.addListener(w):chrome.tabs.onUpdated.addListener(v);const y={async unregister(){l?chrome.webNavigation.onCommitted.removeListener(w):chrome.tabs.onUpdated.removeListener(v)}};return"function"==typeof t&&t(y),y};function x(e){return{file:new URL(e,location.origin).pathname}}async function A({origins:e}){const t=chrome.runtime.getManifest().content_scripts;if(!t)throw new Error("webext-dynamic-content-scripts tried to register scripts on th new host permissions, but no content scripts were found in the manifest.");for(const n of e||[])for(const e of t){const t=I({js:(e.js||[]).map((e=>x(e))),css:(e.css||[]).map((e=>x(e))),allFrames:e.all_frames,matches:[n],excludeMatches:e.matches,runAt:e.run_at});y.set(n,t)}var n,o;o=t,0!==(n=e||[]).length&&chrome.tabs.query({url:n},(e=>{for(const t of e)t.id&&h(t.id,o)}))}(async()=>{A(await(0,d.nH)({strictOrigins:!1}))})(),chrome.permissions.onAdded.addListener((e=>{e.origins&&e.origins.length>0&&A(e)})),chrome.permissions.onRemoved.addListener((async({origins:e})=>{if(e&&0!==e.length)for(const[t,n]of y)e.includes(t)&&(await n).unregister()}))},842:(e,t,n)=>{n.d(t,{lT:()=>o,nH:()=>a});n(411);function o(){return r(chrome.runtime.getManifest())}function r(e){var t,n,o;const r={origins:[],permissions:[]},i=new Set([...null!==(t=e.permissions)&&void 0!==t?t:[],...(null!==(n=e.content_scripts)&&void 0!==n?n:[]).flatMap((e=>{var t;return null!==(t=e.matches)&&void 0!==t?t:[]}))]);e.devtools_page&&!(null===(o=e.optional_permissions)||void 0===o?void 0:o.includes("devtools"))&&i.add("devtools");for(const e of i)e.includes("://")?r.origins.push(e):r.permissions.push(e);return r}const i=/:[/][/][*.]*([^/]+)/;function s(e){return e.split(i)[1]}async function a(e){return new Promise((t=>{chrome.permissions.getAll((n=>{const r=o();t(c(r,n,e))}))}))}function c(e,t,{strictOrigins:n=!0}={}){var o,r;const i={origins:[],permissions:[]};for(const r of null!==(o=t.origins)&&void 0!==o?o:[])if(!e.origins.includes(r)){if(!n){const t=s(r);if(e.origins.some((e=>s(e)===t)))continue}i.origins.push(r)}for(const n of null!==(r=t.permissions)&&void 0!==r?r:[])e.permissions.includes(n)||i.permissions.push(n);return i}},136:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var o=n(848),r=n(411);let i=!0;function s(e){let t;return()=>(i&&void 0!==t||(t=e()),t)}const a=s((()=>globalThis.location?.protocol.startsWith("http"))),c=s((()=>"object"==typeof globalThis.chrome?.extension)),l=(s((()=>c()&&a())),s((()=>c()&&("/_generated_background_page.html"===location.pathname||chrome.extension?.getBackgroundPage?.()===globalThis.window))));s((()=>{if(!c()||!chrome.runtime.getManifest)return!1;const{options_ui:e}=chrome.runtime.getManifest();if("string"!=typeof e?.page)return!1;return new URL(e.page,location.origin).pathname===location.pathname})),s((()=>{if(!c()||!chrome.devtools)return!1;const{devtools_page:e}=chrome.runtime.getManifest();if("string"!=typeof e)return!1;return new URL(e,location.origin).pathname===location.pathname}));var u=n(842);async function d(e,t,...n){const{frameId:r,tabId:i}="object"==typeof e?e:{tabId:e,frameId:0},[s]=await o.Z.tabs.executeScript(i,{code:`(${t.toString()})(...${JSON.stringify(n)})`,frameId:r});return s}async function m(e){const{frameId:t,tabId:n}="object"==typeof e?e:{tabId:e,frameId:0};try{if(0===t){const e=await o.Z.tabs.get(n);if(e.url)return e.url}return await d(e,(()=>location.href))}catch{}}const f="webext-domain-permission-toggle:add-permission";let p;async function g(e){const t={checked:!1,enabled:!0};if(e){const n=new URL(e).origin,i=(0,u.lT)(),s=(0,r.sr)(...i.origins).test(n);t.enabled=!s,t.checked=s||await async function(e){return o.Z.permissions.contains({origins:[e+"/*"]})}(n)}chrome.contextMenus.update(f,t)}async function h({tabId:e}){var t;g(null!==(t=await m(e))&&void 0!==t?t:"")}async function b({checked:e,menuItemId:t},n){if(t===f)try{await async function(e,t){const n="The browser didn't supply any information about the active tab.";if(!e.url&&t)throw new Error(`Please try again. ${n}`);if(!e.url&&!t)throw new Error(`Couldn't disable the extension on the current tab. ${n}`);const r={origins:[new URL(e.url).origin+"/*"]};if(!t)return void o.Z.permissions.remove(r);await o.Z.permissions.request(r)?p.reloadOnSuccess&&d(e.id,(e=>{confirm(e)&&location.reload()}),p.reloadOnSuccess):chrome.contextMenus.update(f,{checked:!1})}(n,e)}catch(e){if(null==n?void 0:n.id){try{await d(n.id,"alert",String(e instanceof Error?e:new Error(e.message)))}catch{alert(e)}g()}throw e}}function v(e){if(!l())throw new Error("webext-domain-permission-toggle can only be called from a background page");if(p)throw new Error("webext-domain-permission-toggle can only be initialized once");const{name:t,optional_permissions:n}=chrome.runtime.getManifest();if(p={title:`Enable ${t} on this domain`,reloadOnSuccess:!1,...e},!0===p.reloadOnSuccess&&(p.reloadOnSuccess=`Do you want to reload this page to apply ${t}?`),!chrome.contextMenus)throw new Error("webext-domain-permission-toggle requires the `contextMenu` permission");const o=null==n?void 0:n.filter((e=>/<all_urls>|\*/.test(e)));if(!o||0===o.length)throw new TypeError("webext-domain-permission-toggle some wildcard hosts to be specified in `optional_permissions`");chrome.contextMenus.remove(f,(()=>chrome.runtime.lastError)),chrome.contextMenus.create({id:f,type:"checkbox",checked:!1,title:p.title,contexts:["page_action","browser_action"],documentUrlPatterns:o}),chrome.contextMenus.onClicked.addListener(b),chrome.tabs.onActivated.addListener(h),chrome.tabs.onUpdated.addListener((async(e,{status:t},{url:n,active:o})=>{var r;o&&"complete"===t&&g(null!==(r=null!=n?n:await m(e))&&void 0!==r?r:"")}))}},411:(e,t,n)=>{n.d(t,{sr:()=>a});const o=/^(https?|wss?|file|ftp|\*):\/\/(\*|\*\.[^*/]+|[^*/]+)\/.*$|^file:\/\/\/.*$|^resource:\/\/(\*|\*\.[^*/]+|[^*/]+)\/.*$|^about:/,r="object"==typeof navigator&&navigator.userAgent.includes("Firefox/"),i=r?/^(https?|wss?):[/][/][^/]+([/].*)?$/:/^https?:[/][/][^/]+([/].*)?$/,s=/^(https?|file|ftp):[/]+/;function a(...e){return 0===e.length?/$./:e.includes("<all_urls>")?s:e.includes("*://*/*")?i:new RegExp(e.map((e=>function(e){if(!o.test(e))throw new Error(e+" is an invalid pattern, it must match "+String(o));let[,t,n,i]=e.split(/(^[^:]+:[/][/])([^/]+)?/);return t=t.replace("*",r?"(https?|wss?)":"https?").replace(/[/]/g,"[/]"),n=(null!=n?n:"").replace(/^[*][.]/,"([^/]+.)*").replace(/^[*]$/,"[^/]+").replace(/[.]/g,"[.]").replace(/[*]$/g,"[^.]+"),i=i.replace(/[/]/g,"[/]").replace(/[.]/g,"[.]").replace(/[*]/g,".*"),"^"+t+n+"("+i+")?$"}(e))).join("|"))}},848:(e,t,n)=>{n.d(t,{Z:()=>r});const o=globalThis.chrome&&new function e(t){return new Proxy(t,{get:(t,n)=>"function"!=typeof t[n]?new e(t[n]):(...e)=>new Promise(((o,r)=>{t[n](...e,(e=>{chrome.runtime.lastError?r(new Error(chrome.runtime.lastError.message)):o(e)}))}))})}(globalThis.chrome),r=o}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};(()=>{n(406);var e=n(136);chrome.contextMenus.create({id:"change-icon-color",title:"Change icon colors",contexts:["page","page_action","browser_action"],documentUrlPatterns:["https://github.com/*","https://gitlab.com/*","https://*.gogs.io/*","https://*.gitea.io/*"]}),chrome.contextMenus.create({id:"toggle-dark-mode",title:"Toggle dark mode",contexts:["page","page_action","browser_action"],documentUrlPatterns:["https://github.com/*","https://gitlab.com/*","https://*.gogs.io/*","https://*.gitea.io/*"]}),(0,e.default)();var t=function(e){return function(t){var n=t[0];chrome.storage.sync.get(e,(function(t){var o;chrome.storage.sync.set(((o={})[e]=!t[e],o),(function(){void 0!==n.id&&chrome.tabs.reload(n.id)}))}))}};chrome.contextMenus.onClicked.addListener((function(e){"change-icon-color"===e.menuItemId?chrome.tabs.query({active:!0,currentWindow:!0},t("colorsDisabled")):"toggle-dark-mode"===e.menuItemId&&chrome.tabs.query({active:!0,currentWindow:!0},t("darkMode"))})),chrome.tabs.onUpdated.addListener((function(e,t,n){var o;"complete"===(null==t?void 0:t.status)&&("github.com"===new URL(null!==(o=null==n?void 0:n.url)&&void 0!==o?o:"").hostname&&chrome.tabs.sendMessage(e,{message:"file-icon-extension-page-update"}))}))})()})();